{"version":3,"sources":["../../../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../apps/app/src/shared/contexts/AuthContext.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\r\n\r\ninterface AuthContextType {\r\n  user: any;\r\n  tenant: any;\r\n  token: string | null;\r\n  login: (email: string, password: string, subdomain?: string) => Promise<boolean>;\r\n  logout: () => void;\r\n  isAuthenticated: boolean;\r\n}\r\n\r\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState(null);\r\n  const [tenant, setTenant] = useState(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Check for existing auth on mount\r\n    const savedToken = localStorage.getItem('auth_token');\r\n    const savedUser = localStorage.getItem('user_data');\r\n    const savedTenant = localStorage.getItem('tenant_data');\r\n\r\n    if (savedToken && savedUser && savedTenant) {\r\n      setToken(savedToken);\r\n      setUser(JSON.parse(savedUser));\r\n      setTenant(JSON.parse(savedTenant));\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  const login = async (email: string, password: string, subdomain?: string): Promise<boolean> => {\r\n    try {\r\n      const response = await fetch('/api/auth/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email, password, subdomain })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setToken(data.data.token);\r\n        setUser(data.data.user);\r\n        setTenant(data.data.user.tenant);\r\n        \r\n        localStorage.setItem('auth_token', data.data.token);\r\n        localStorage.setItem('user_data', JSON.stringify(data.data.user));\r\n        localStorage.setItem('tenant_data', JSON.stringify(data.data.user.tenant));\r\n        \r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    setTenant(null);\r\n    setToken(null);\r\n    localStorage.removeItem('auth_token');\r\n    localStorage.removeItem('user_data');\r\n    localStorage.removeItem('tenant_data');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{\r\n      user,\r\n      tenant,\r\n      token,\r\n      login,\r\n      logout,\r\n      isAuthenticated: !!token && !!user\r\n    }}>\r\n      {!isLoading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"0NA0BQG,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEE,KAAK,0CCS9B,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAc,CAAA,EAAA,EAAA,aAAA,AAAa,OAA8B,GAExD,SAAS,EAAa,UAAE,CAAQ,CAA2B,EAChE,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,MAC3B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,MAC/B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAE3C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAER,IAAM,EAAa,aAAa,OAAO,CAAC,cAClC,EAAY,aAAa,OAAO,CAAC,aACjC,EAAc,aAAa,OAAO,CAAC,eAErC,GAAc,GAAa,IAC7B,EAAS,GACT,EAAQ,EAFkC,GAE7B,KAAK,CAAC,IACnB,EAAU,KAAK,KAAK,CAAC,KAEvB,GAAa,EACf,EAAG,EAAE,EAEL,IAAM,EAAQ,MAAO,EAAe,EAAkB,KACpD,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,kBAAmB,CAC9C,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CAAE,QAAO,WAAU,WAAU,EACpD,GAEM,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,EAAK,OAAO,CASd,CATgB,MAChB,EAAS,EAAK,IAAI,CAAC,KAAK,EACxB,EAAQ,EAAK,IAAI,CAAC,IAAI,EACtB,EAAU,EAAK,IAAI,CAAC,IAAI,CAAC,MAAM,EAE/B,aAAa,OAAO,CAAC,aAAc,EAAK,IAAI,CAAC,KAAK,EAClD,aAAa,OAAO,CAAC,YAAa,KAAK,SAAS,CAAC,EAAK,IAAI,CAAC,IAAI,GAC/D,aAAa,OAAO,CAAC,cAAe,KAAK,SAAS,CAAC,EAAK,IAAI,CAAC,IAAI,CAAC,MAAM,IAEjE,EAET,OAAO,CACT,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,eAAgB,IACvB,CACT,CACF,EAWA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAY,QAAQ,CAAA,CAAC,MAAO,MAC3B,SACA,EACA,cACA,EACA,OAfW,KACb,EAAQ,MACR,EAAU,MACV,EAAS,MACT,aAAa,UAAU,CAAC,cACxB,aAAa,UAAU,CAAC,aACxB,aAAa,UAAU,CAAC,cAC1B,EASI,gBAAiB,CAAC,CAAC,GAAS,CAAC,CAAC,CAChC,WACG,CAAC,GAAa,GAGrB,CAEO,SAAS,IACd,IAAM,EAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,GAC3B,QAAgB,IAAZ,EACF,KADyB,CACnB,AAAI,MAAM,+CAElB,OAAO,CACT","ignoreList":[0,1,2]}